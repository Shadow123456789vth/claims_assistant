"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _react2 = require("@testing-library/react");

var _ToggleGroup = _interopRequireDefault(require("./ToggleGroup"));

var options = [{
  value: 1,
  label: "Amazon"
}, {
  value: 2,
  label: "Ebay"
}, {
  value: 3,
  label: "Apple"
}, {
  value: 4,
  label: "Google"
}];
describe("Toggle group component tests", function () {
  test("Toggle group renders with correct labels", function () {
    var _render = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_ToggleGroup["default"], {
      label: "Toggle group label",
      helperText: "Toggle group helper text",
      options: options
    })),
        getByText = _render.getByText;

    expect(getByText("Toggle group label")).toBeTruthy();
    expect(getByText("Toggle group helper text")).toBeTruthy();
    expect(getByText("Amazon")).toBeTruthy();
    expect(getByText("Ebay")).toBeTruthy();
    expect(getByText("Apple")).toBeTruthy();
    expect(getByText("Google")).toBeTruthy();
  });
  test("Uncontrolled toggle group calls correct function on change with value", function () {
    var onChange = jest.fn();

    var _render2 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_ToggleGroup["default"], {
      options: options,
      onChange: onChange
    })),
        getByText = _render2.getByText;

    var option = getByText("Ebay");

    _react2.fireEvent.click(option);

    expect(onChange).toHaveBeenCalledWith(2);
  });
  test("Controlled toggle group calls correct function on change with value", function () {
    var onChange = jest.fn();

    var _render3 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_ToggleGroup["default"], {
      options: options,
      onChange: onChange,
      value: 1
    })),
        getByText = _render3.getByText;

    var option = getByText("Ebay");

    _react2.fireEvent.click(option);

    expect(onChange).toHaveBeenCalledWith(2);
  });
  test("Function on change is not called when disable", function () {
    var onChange = jest.fn();

    var _render4 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_ToggleGroup["default"], {
      options: options,
      onChange: onChange,
      disabled: true
    })),
        getByText = _render4.getByText;

    var option = getByText("Ebay");

    _react2.fireEvent.click(option);

    expect(onChange).toHaveBeenCalledTimes(0);
  });
  test("Uncontrolled multiple toggle group calls correct function on change with value when is multiple", function () {
    var onChange = jest.fn();

    var _render5 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_ToggleGroup["default"], {
      options: options,
      onChange: onChange,
      multiple: true
    })),
        getAllByRole = _render5.getAllByRole;

    var toggleOptions = getAllByRole("switch");

    _react2.fireEvent.click(toggleOptions[0]);

    expect(onChange).toHaveBeenCalledWith([1]);

    _react2.fireEvent.click(toggleOptions[1]);

    _react2.fireEvent.click(toggleOptions[3]);

    expect(onChange).toHaveBeenCalledWith([1, 2, 4]);
    expect(toggleOptions[0].getAttribute("aria-checked")).toBe("true");
    expect(toggleOptions[1].getAttribute("aria-checked")).toBe("true");
    expect(toggleOptions[3].getAttribute("aria-checked")).toBe("true");
  });
  test("Controlled multiple toggle returns always same values", function () {
    var onChange = jest.fn();

    var _render6 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_ToggleGroup["default"], {
      options: options,
      onChange: onChange,
      value: [1],
      multiple: true
    })),
        getByText = _render6.getByText;

    var option = getByText("Ebay");

    _react2.fireEvent.click(option);

    expect(onChange).toHaveBeenCalledWith([1, 2]);
    var option2 = getByText("Google");

    _react2.fireEvent.click(option2);

    expect(onChange).toHaveBeenNthCalledWith(2, [1, 4]);
  });
  test("Single selection: Renders with correct default value", function () {
    var _render7 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_ToggleGroup["default"], {
      options: options,
      defaultValue: 2
    })),
        getAllByRole = _render7.getAllByRole;

    var toggleOptions = getAllByRole("radio");
    expect(toggleOptions[1].getAttribute("aria-checked")).toBe("true");
  });
  test("Multiple selection: Renders with correct default value", function () {
    var _render8 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_ToggleGroup["default"], {
      options: options,
      defaultValue: [2, 4],
      multiple: true
    })),
        getAllByRole = _render8.getAllByRole;

    var toggleOptions = getAllByRole("switch");
    expect(toggleOptions[1].getAttribute("aria-checked")).toBe("true");
    expect(toggleOptions[3].getAttribute("aria-checked")).toBe("true");
  });
});