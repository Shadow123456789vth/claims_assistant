"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _react2 = require("@testing-library/react");

var _Switch = _interopRequireDefault(require("./Switch"));

describe("Switch component tests", function () {
  test("Switch renders with correct text", function () {
    var onChange = jest.fn(function (returnedValue) {
      expect(returnedValue).toBe(true);
    });

    var _render = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Switch["default"], {
      label: "SwitchComponent",
      checked: false,
      onChange: onChange
    })),
        getByText = _render.getByText;

    expect(getByText("SwitchComponent")).toBeTruthy();
  });
  test("Calls correct function on click", function () {
    var onChange = jest.fn();

    var _render2 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Switch["default"], {
      label: "SwitchComponent",
      checked: false,
      onChange: onChange
    })),
        getByText = _render2.getByText;

    _react2.fireEvent.click(getByText("SwitchComponent"));

    expect(onChange).toHaveBeenCalled();
  });
  test("Calls correct function on key down", function () {
    var onChange = jest.fn();

    var _render3 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Switch["default"], {
      label: "SwitchComponent",
      checked: false,
      onChange: onChange
    })),
        getByText = _render3.getByText;

    _react2.fireEvent.focus(getByText("SwitchComponent"));

    _react2.fireEvent.keyDown(getByText("SwitchComponent"), {
      key: "Enter"
    });

    expect(onChange).toHaveBeenCalled();

    _react2.fireEvent.keyDown(getByText("SwitchComponent"), {
      key: " "
    });

    expect(onChange).toHaveBeenCalled();
  });
  test("Everytime the user clicks the component the onchange function is called with the correct value CONTROLLED COMPONENT", function () {
    var onChange = jest.fn();

    var _render4 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Switch["default"], {
      label: "SwitchComponent",
      checked: false,
      onChange: onChange
    })),
        getByText = _render4.getByText;

    _react2.fireEvent.click(getByText("SwitchComponent"));

    _react2.fireEvent.click(getByText("SwitchComponent"));

    expect(onChange.mock.calls[0][0]).toBe(true);
    expect(onChange.mock.calls[1][0]).toBe(true);
  });
  test("Everytime the user use enter in the component, the onchange function is called with the correct value CONTROLLED COMPONENT", function () {
    var onChange = jest.fn();

    var _render5 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Switch["default"], {
      label: "SwitchComponent",
      checked: false,
      onChange: onChange
    })),
        getByText = _render5.getByText;

    _react2.fireEvent.focus(getByText("SwitchComponent"));

    _react2.fireEvent.keyDown(getByText("SwitchComponent"), {
      key: "Enter"
    });

    _react2.fireEvent.keyDown(getByText("SwitchComponent"), {
      key: "Enter"
    });

    expect(onChange.mock.calls[0][0]).toBe(true);
    expect(onChange.mock.calls[1][0]).toBe(true);
  });
  test("Everytime the user use space in the component, the onchange function is called with the correct value CONTROLLED COMPONENT", function () {
    var onChange = jest.fn();

    var _render6 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Switch["default"], {
      label: "SwitchComponent",
      checked: false,
      onChange: onChange
    })),
        getByText = _render6.getByText;

    _react2.fireEvent.focus(getByText("SwitchComponent"));

    _react2.fireEvent.keyDown(getByText("SwitchComponent"), {
      key: " "
    });

    _react2.fireEvent.keyDown(getByText("SwitchComponent"), {
      key: " "
    });

    expect(onChange.mock.calls[0][0]).toBe(true);
    expect(onChange.mock.calls[1][0]).toBe(true);
  });
  test("Everytime the user clicks the component the onchange function is called with the correct value UNCONTROLLED COMPONENT", function () {
    var onChange = jest.fn();

    var _render7 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Switch["default"], {
      label: "SwitchComponent",
      onChange: onChange
    })),
        getByText = _render7.getByText;

    _react2.fireEvent.click(getByText("SwitchComponent"));

    _react2.fireEvent.click(getByText("SwitchComponent"));

    expect(onChange.mock.calls[0][0]).toBe(true);
    expect(onChange.mock.calls[1][0]).toBe(false);
  });
  test("Everytime the user use enter in the component, the onchange function is called with the correct value UNCONTROLLED COMPONENT", function () {
    var onChange = jest.fn();

    var _render8 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Switch["default"], {
      label: "SwitchComponent",
      onChange: onChange
    })),
        getByText = _render8.getByText;

    _react2.fireEvent.focus(getByText("SwitchComponent"));

    _react2.fireEvent.keyDown(getByText("SwitchComponent"), {
      key: "Enter"
    });

    _react2.fireEvent.keyDown(getByText("SwitchComponent"), {
      key: "Enter"
    });

    expect(onChange.mock.calls[0][0]).toBe(true);
    expect(onChange.mock.calls[1][0]).toBe(false);
  });
  test("Everytime the user use space in the component, the onchange function is called with the correct value UNCONTROLLED COMPONENT", function () {
    var onChange = jest.fn();

    var _render9 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Switch["default"], {
      label: "SwitchComponent",
      onChange: onChange
    })),
        getByText = _render9.getByText;

    _react2.fireEvent.focus(getByText("SwitchComponent"));

    _react2.fireEvent.keyDown(getByText("SwitchComponent"), {
      key: " "
    });

    _react2.fireEvent.keyDown(getByText("SwitchComponent"), {
      key: " "
    });

    expect(onChange.mock.calls[0][0]).toBe(true);
    expect(onChange.mock.calls[1][0]).toBe(false);
  });
  test("Renders with correct initial value and initial state when it is uncontrolled", function () {
    var component = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Switch["default"], {
      label: "Default label",
      defaultChecked: true,
      value: "test-defaultChecked",
      name: "test"
    }));
    var switchEl = component.getByRole("switch");
    var inputEl = component.container.querySelector("input[name=\"test\"]");
    expect(inputEl.value).toBe("test-defaultChecked");
    expect(switchEl.getAttribute("aria-checked")).toBe("true");
  });
  test("Renders with correct aria attributes", function () {
    var _render10 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Switch["default"], {
      label: "Default label"
    })),
        getByText = _render10.getByText,
        getByRole = _render10.getByRole;

    var switchEl = getByRole("switch");
    var label = getByText("Default label");
    expect(switchEl.getAttribute("aria-labelledby")).toBe(label.id);
    expect(switchEl.getAttribute("aria-checked")).toBe("false");
  });
  test("Renders disabled switch correctly", function () {
    var _render11 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Switch["default"], {
      label: "Default label",
      disabled: true
    })),
        getByText = _render11.getByText,
        getByRole = _render11.getByRole;

    var switchEl = getByRole("switch");
    var label = getByText("Default label");
    expect(switchEl.getAttribute("aria-labelledby")).toBe(label.id);
    expect(switchEl.getAttribute("aria-checked")).toBe("false");
    expect(switchEl.getAttribute("aria-disabled")).toBe("true");
  });
});