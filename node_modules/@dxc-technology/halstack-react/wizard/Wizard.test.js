"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _react2 = require("@testing-library/react");

var _Wizard = _interopRequireDefault(require("./Wizard"));

describe("Wizard components tests", function () {
  test("Wizard renders with correct steps", function () {
    var _render = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Wizard["default"], {
      steps: [{
        label: "first-step"
      }, {
        label: "second-step"
      }]
    })),
        getByText = _render.getByText,
        getAllByRole = _render.getAllByRole;

    var steps = getAllByRole("button");
    expect(getByText("first-step")).toBeTruthy();
    expect(getByText("second-step")).toBeTruthy();
    expect(steps[0].getAttribute("aria-current")).toBe("step");
    expect(steps[1].getAttribute("aria-current")).toBe("false");
  });
  test("Wizard renders with initially selected step", function () {
    var _render2 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Wizard["default"], {
      defaultCurrentStep: 1,
      steps: [{
        label: "first-step"
      }, {
        label: "second-step"
      }]
    })),
        getAllByRole = _render2.getAllByRole;

    var steps = getAllByRole("button");
    expect(steps[1].getAttribute("aria-current")).toBe("step");
  });
  test("Click on step text", function () {
    var onClick = jest.fn();

    var _render3 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Wizard["default"], {
      onStepClick: onClick,
      steps: [{
        label: "first-step"
      }]
    })),
        getByText = _render3.getByText;

    var step = getByText("first-step");

    _react2.fireEvent.click(step);

    expect(onClick).toHaveBeenCalled();
  });
  test("Click on step description", function () {
    var onClick = jest.fn();

    var _render4 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Wizard["default"], {
      onStepClick: onClick,
      steps: [{
        label: "first-step",
        description: "step-description"
      }]
    })),
        getByText = _render4.getByText;

    var step = getByText("step-description");

    _react2.fireEvent.click(step);

    expect(onClick).toHaveBeenCalled();
  });
  test("Click on step number", function () {
    var onClick = jest.fn();

    var _render5 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Wizard["default"], {
      onStepClick: onClick,
      steps: [{
        label: "first-step"
      }]
    })),
        getByText = _render5.getByText;

    var step = getByText("1");

    _react2.fireEvent.click(step);

    expect(onClick).toHaveBeenCalled();
  });
  test("Click on disable step", function () {
    var onClick = jest.fn();

    var _render6 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Wizard["default"], {
      onStepClick: onClick,
      steps: [{
        label: "first-step"
      }, {
        label: "second-step",
        disabled: true
      }]
    })),
        getByText = _render6.getByText;

    var step = getByText("second-step");

    _react2.fireEvent.click(step);

    expect(onClick).toHaveBeenCalledTimes(0);
  });
  test("Controlled wizard function is called", function () {
    var onClick = jest.fn(function (i) {
      return i;
    });

    var _render7 = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_Wizard["default"], {
      currentStep: 0,
      onStepClick: onClick,
      steps: [{
        label: "first-step"
      }, {
        label: "second-step"
      }]
    })),
        getAllByRole = _render7.getAllByRole;

    var steps = getAllByRole("button");

    _react2.fireEvent.click(steps[1]);

    _react2.fireEvent.click(steps[0]);

    expect(onClick).toHaveBeenCalledTimes(2);
    expect(onClick).toHaveBeenNthCalledWith(1, 1);
    expect(onClick).toHaveBeenNthCalledWith(2, 0);
  });
});